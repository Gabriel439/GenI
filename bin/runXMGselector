#!/bin/sh

GRAMMAR_FILE=${1}
USERNAME=`whoami`

if [ x${GENI_TMP} == x ]; then
  GENI_TMP=/tmp
fi
TMP_FILE_PREFIX="${GENI_TMP}/geni_to_sel-"${USERNAME}
TMP_RES_PREFIX="${GENI_TMP}/geni_from_sel-"${USERNAME}

TMP_FIL_FILE="${TMP_FILE_PREFIX}-$$.fil"
TMP_RES_FILE="${TMP_RES_PREFIX}-$$.geni"

# clean up the old fil/res files
rm ${TMP_FILE_PREFIX}* ${TMP_RES_PREFIX}*

# write the stuff from stdin into a filter file
cat > ${TMP_FIL_FILE}

SelectTAG ${GRAMMAR_FILE} ${TMP_FIL_FILE} --geni -o ${TMP_RES_FILE}
CMDEXIT=$?

if [ -r ${TMP_RES_FILE} ]; then
cat ${TMP_RES_FILE}
else
  exit 1
fi
